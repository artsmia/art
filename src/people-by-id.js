var React = require('react')
var Router = require('react-router')
var { Link } = Router
var rest = require('rest')
var Helmet = require('react-helmet')
var R = require('ramda')

var Person = require('./artist')
var searchEndpoint = require('./endpoints').search

const definedGroups = {
  'black-history-month': `Alfred%20Eisenstaedt,Beauford%20Delaney,Benny%20Andrews,Betye%20Saar,Bob%20Thompson,Carl%20Robert%20Pope,%20Jr.,Carrie%20Mae%20Weems,Charles%20Gaines,Charles%20White,Clarence%20Morgan,Clementine%20Hunter,David%20Levinthal,Elizabeth%20Catlett,Emma%20Amos,Frank%20E.%20Cummings%20III,Frank%20J.%20Brown,Fred%20McDarrah,Fred%20Wilson,Glenn%20Ligon,Gordon%20Parks,Gwendolyn%20Knight,Henry%20Bannarn,Henry%20Ray%20Clark,Iona%20Rozeal%20Brown,Jacob%20Lawrence,James%20Van%20Der%20Zee,John%20Biggers,John%20Dowell,John%20Moore,John%20Woodrow%20Wilson,Jules%20Lion,Julie%20Mehretu,Kara%20Walker,Kehinde%20Wiley,Kerry%20James%20Marshall,Laylah%20Ali,Leslie%20Hewitt,Lois%20Mailou%20Jones,Lonnie%20Holley,Lorna%20Simpson,Lorraine%20O'Grady,Mark%20Bradford,Martin%20Puryear,Mary%20Lee%20Bendolph,McArthur%20Binion,Melvin%20Edwards,Mequitta%20Ahuja,Mickalene%20Thomas,Minnie%20Evans,Mitchell%20Squire,Nick%20Cave,Paul%20Anthony%20Smith,Purvis%20Young,Reginald%20Sanders,RenÃ©e%20Stout,Richard%20Hunt,Rico%20Gatson,Robert%20Scott%20Duncanson,Romare%20Howard%20Bearden,Roy%20DeCarava,Russell%20T.%20Gordon,Sam%20Gilliam,Sanford%20Biggers,Sedrick%20Huckaby,Shinique%20Smith,Thorton%20Dial,Todd%20Gray,Vincent%20D.%20Smith,Wadsworth%20Jarrell,William%20Edmondson,William%20Howard,Willie%20Cole`,
  'womens-history-month': `12,45,48,49,51,54,62,73,74,81,87,91,104,120,168,176,218,242,249,250,257,269,271,404,455,458,478,566,611,654,711,712,735,755,819,841,872,873,891,898,904,935,936,948,949,959,961,962,976,979,980,985,986,987,1012,1017,1021,1025,1049,1050,1077,1080,1087,1096,1097,1098,1104,1105,1107,1115,1127,1132,1138,1145,1146,1159,1174,1177,1207,1212,1217,1218,1229,1233,1242,1248,1251,1252,1253,1254,1256,1257,1258,1259,1260,1261,1272,1276,1296,1298,1300,1310,1315,1319,1320,1323,1328,1330,1333,1335,1336,1357,1359,1361,1366,1374,1377,1380,1422,1439,1440,1460,1468,1478,1494,1495,1512,1518,1524,1527,1533,1536,1541,1542,1559,1567,1568,1574,1575,1576,1577,1579,1583,1586,1589,1609,1611,1621,1622,1625,1637,1638,1640,1643,1655,1658,1672,1675,1682,1683,1684,1688,1689,1695,1696,1698,1722,1757,1779,1786,1821,1830,1868,1899,1900,1903,1911,1919,1935,1938,1944,1956,1973,2058,2132,2134,2148,2150,2153,2157,2173,2184,2223,2272,2273,2298,2343,2352,2381,2383,2391,2526,2534,2540,2623,2644,2678,2737,2761,2791,2793,2826,2845,2853,2860,2883,2905,2906,2908,2909,2914,2915,2917,2919,2920,2922,3102,3118,3140,3204,3215,3217,3236,3237,3244,3245,3251,3255,3256,3257,3265,3279,3283,3284,3293,3294,3302,3305,3309,3314,3318,3471,3490,3500,3523,3559,3620,3669,3683,3690,3710,3725,3758,3759,3761,3762,3763,3764,3765,3783,3797,3878,3900,3953,3969,4108,4206,4219,4227,4279,4295,4319,4320,4324,4339,4353,4355,4410,4424,4429,4433,4483,4507,4516,4573,4609,4615,4631,4845,4951,4953,4977,4978,5066,5068,5133,5155,5276,5308,5338,5438,5488,5489,5497,5514,5523,5544,5558,5582,5590,5675,5715,5722,5724,5742,5763,5780,5781,5783,5786,5790,5796,5797,5805,5811,5861,5868,5872,5938,5952,5954,5972,5998,6030,6054,6058,6059,6060,6063,6065,6094,6130,6140,6153,6177,6220,6247,6283,6327,6349,6350,6361,6533,6574,6590,6624,6631,6674,6704,6770,6786,6844,6866,6885,6890,6897,6912,6977,7003,7138,7162,7245,7265,7289,7317,7357,7483,7485,7491,7572,7577,7578,7579,7580,7583,7655,7681,7937,7953,7988,7991,8009,8025,8026,8028,8090,8093,8094,8100,8148,8178,8201,8209,8272,8294,8298,8307,8367,8368,8383,8401,8464,8489,8491,8835,8905,9047,9093,9096,9140,9184,9209,9345,9470,9472,9483,9487,9592,9622,9633,9637,9675,9813,9814,9817,9823,9939,9969,10064,10093,10099,10105,10136,10149,10183,10228,10231,10262,10302,10423,10466,10576,10592,10605,10668,10762,10782,10801,10814,10834,10879,11079,11083,11130,11140,11271,11346,11359,11424,11425,11439,11498,11537,11606,11615,11645,11672,11695,11827,11830,11895,12035,12245,12470,12550,12572,12575,12908,12984,13130,13133,13304,13640,13715,13731,13840,13871,13878,13917,13947,13954,14087,14100,14144,14147,14193,14215,14221,14222,14224,14259,14337,14338,14348,14415,14605,14607,14637,14649,14677,14846,14895,14921,14922,14932,14947,14962,14967,14988,14994,15027,15053,15070,15096,15120,15269,15289,15359,15378,15381,15435,15446,15447,15566,15586,15654,15804,15939,15942,15964,16000,16031,16147,16317,16339,16500,16715,16718,16749,16871,16973,17072,17167,17294,17429,17490,17495,17515,17521,17762,18076,18219,18537,18639,18677,18681,18821,18883,18886,18954,18963,19055,19056,19058,19134,19154,19156,19250,19298,19392,19411,19412,19442,19471,19476,19490,19493,19513,19521,19547,19548,19562,19667,19739,19822,19888,19891,19894,19897,19904,19922,19924,19943,19944,19946,19947,19950,20045,20046,20378,20770,20779,20788,20789,20790,20791,20795,20796,20809,20816,20817,20819,20820,20821,20832,20838,20844,20849,20851,20855,20857,20860,20863,20864,20869,20873,20897,21095,21299,21321,21484,21492,21496,21502,21521,21523,21632,21656,21700,21721,21736,21787,21813,21832,21854,21965,21993,22023,22029,22033,22058,22078,22122,22168,22190,22342,22363,22379,22439,22450,22468,22469,22471,22473,22474,22489,22499,22500,22528,22529,22545,22618,22628,22637,22680,22705,22801,22864,22912,22995,23097,23120,23194,23368,23370,23422,23473,23475,23479,23480,23497,23503,23522,23527,23528,23529,23530,23533,23534,23544,23628,23630,23705,23709,23742,23761,23764,23811,23898,23899,23998,24198,24232,24298,24390,24414,24452,24528,24532,24613,24653,24660,24662,24667,24676,24734,24738,24755,24772,24780,24879,24887,24894,24896,24925,24926,24936,25131,25243,25380,25463,25558,25642,25645,25649,25665,25666,25688,25713,25762,25854,25903,25909,25912,25926,25936,25960,25961,25963,25984,26063,26064,26171,26202,26255,26316,26341,26355,26367,26377,26417,26492,26495,26544,26578,26632,26633,26655,26657,26669,26690,26692,26695,26796,26802,26827,27195,27588,27614,27640,27653,27663,27686,27697,27736,27737,27793,27800,27820,27860,27863,27873,27876,27877,27881,27915,27928,27942,28051,28166,28183,28196,28269,28311,28447,28450,28455,28467,28480,28519,28541,28645,28666,28695,28762,28763,28764,28780,28946,28970,29002,29034,29162,29164,29187,29202,29207,29263,29317,29378,29382,29391,29399,29401,29403,29406,29408,29409,29422,29429,29469,29478,29489,29496,29498,29528,29537,29555,29556,29571,29574,29586,29588,29589,29592,29594,29599,29685,29716,29735,29747,29773,29792,29832,29879,29975,30020,30022,30056,30187,30195,30201,30207,30215,30232,30265,30303,30325,30381,30441,30467,30483,30495,30501,30525,30565,30566,30567,30570,30571,30572,30573,30589,30590,30603,30604,30605,30654,30704,30707,30708,30730,30782,30809,30814,30830,30833,30843,30853,30860,30864,30874,30876,30880,30902,30908,30909,30918,30919,30962,31042,31089,31131,31151,31178,31184,31226,31228,31245,31249,31309,31317,31335,31338,31344,31359,31367,31372,31374,31390,31406,31419,31444,31460,31525,31571,31611,31719,31726,31749,31786,31804,31807,31811,31812,31822,31824,31832,31875,31880,31888,31908,31912,31914,31918,31919,31922,31923,31988,31992,32005,32058,32080,32121,32169,32172,32224,32226,32233,32261,32265,32283,32309,32314,32323,32329,32342,32346,32347,32352,32353,32354,32356,32358,32388,32390,32391,32435,32483,32523,32537,32538,32576,32595,32596,32601,32602,32608,32609,32614,32616,32617,32619,32625,32633,32635,32639,32690,32721,32733,32735,32766,32792,32793,32807,33818,33825,33838,33863,33877,33902,33911,33912,33920,33923,33935,33937,33941,33943,33944,33945,33946,33948,33949,33959,33966,33967,33970,33981,33985,34014,34018,34027,34029,34030,34031,34034,34035,34043,34066,34072,34081,34084,34087,34092,34094,34099,34101,34102,34107,34109,34134,34135,34139,34149,34165,34166,34167,34169,34173,34181,34182,34184,34192,34198,34203,34204,34205,34206,34209,34210,34211,34212,34215,34216,34219,34227,34228,34229,34230,34233,34251,34265,34266,34268,34269,34272,34276,34278,34281,34283,34286,34290,34301,34303,34331,34335,34359,34514,34515,34569,34679,34708,34725,34809,34822,34922,36026,36054,36055,36057,36073,36114,36116,36119,36176,36195,36196,36198,36266,36270,36377,36382,36498,36501,36517,36519,36542,36652`
}

var People = React.createClass({
  statics: {
    fetchData: {
      artists: (params, existingData) => {
        const artistIds = (definedGroups[params.ids] || params.ids).split(',')
        const slice = 0
        const sliceSize = 50
        const start = slice*sliceSize
        const end = Math.min(artistIds.length, (slice+1)*sliceSize)
        console.info({numArtistIds: artistIds.length, start, end, sliceSize})

        return Promise.all(artistIds.slice(start, end).map(id => rest(`${searchEndpoint}/people/${id}`)))
          .then(values => values.map(({entity}) => {
            return JSON.parse(entity)
          }))
      },
    }
  },

  render() {
    const artists = this.props.data.artists.filter(artist => artist && artist.id)
    const smallScreen = window.innerWidth < 666

    return <div>
      <div style={{background: '#232323', height: '7em', width: '100%'}} />

      <div style={!smallScreen ? {left: '53vw', position: 'fixed', marginTop: '1em'} : {}}>
        <ul>{artists.map(artist => <li style={{display: 'inline-block', padding: '0 1em'}}>
          <a href={`#${artist.name}`}>{artist.name}</a>
        </li>)}</ul>
      </div>

      <div style={{marginLeft: '0%', maxWidth: '50%', zIndex: 6, backgroundColor: 'white'}}>
        {artists.map((artist, index) => <section>
          <a id={artist.name} style={{paddingBottom: '3em', display: 'block'}}></a>
          <Person
            data={{artist}}
            key={artist.id}
            hideHeader={true}
          />
        </section>)}
      </div>
    </div>
  },
})

module.exports = People

